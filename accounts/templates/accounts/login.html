{% extends "base.html" %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'accounts/css/style.css' %}">
{% endblock %}

{% block extra_js %}
    <script src="{% static 'accounts/js/eventHandlers.js' %}"></script>
    <script src="{% static 'accounts/js/login.js' %}"></script>
{% endblock %}

{% block content %}
<div class="container register-container">
    <div class="register-card">
        <h2 class="form-title">Login</h2>

        <form id="login-form" method="post" class="register-form">
            {% csrf_token %}

            {% if form.errors %}
                <ul class="errorlist">
                    {% for field in form %}
                        {% for error in field.errors %}
                            <li>{{ field.label }}: {{ error }}</li>
                        {% endfor %}
                    {% endfor %}
                </ul>
            {% endif %}

            {% for field in form %}
                <div class="form-group">
                    <label for="{{ field.id_for_label }}">
                        {{ field.label }}
                    </label>
                    {{ field }}
                </div>
            {% endfor %}

            <button type="submit" class="btn btn-primary">Login</button>
        </form>
        
        <button type="button" id="forgotPasswordBtn" class="btn btn-secondary" style="width: 100%; margin-top: 15px;">Forgot Password?</button>
    </div>
</div>

<!-- 2FA Modal -->
<div id="twoFactorModal" class="modal-overlay">
    <div class="modal-content">
        <h3 class="modal-title">Enter Verification Code</h3>
        <p class="info-message">We've sent a 6-digit code to your email. Please enter it below:</p>
        <div id="errorMessage"></div>
        <input 
            type="text" 
            id="codeInput" 
            class="code-input" 
            placeholder="000000" 
            maxlength="6"
            inputmode="numeric"
            pattern="[0-9]*"
        >
        <button id="verifyBtn" class="btn btn-primary" style="width: 100%;">Verify Code</button>
    </div>
</div>

<!-- Forgot Password Modal -->
<div id="forgotPasswordModal" class="modal-overlay">
    <div class="modal-content">
        <h3 class="modal-title">Reset Password</h3>
        <p class="info-message">Enter your email address and we'll send you a link to reset your password:</p>
        <div id="forgotPasswordError"></div>
        <input 
            type="email" 
            id="resetEmailInput" 
            class="code-input" 
            placeholder="your@email.com" 
            style="font-size: 1rem; letter-spacing: normal; text-align: left;"
        >
        <button id="sendResetBtn" class="btn btn-primary" style="width: 100%; margin-bottom: 10px;">Send Reset Link</button>
        <button id="cancelResetBtn" class="btn btn-secondary" style="width: 100%;">Cancel</button>
    </div>
</div>
{% endblock %}