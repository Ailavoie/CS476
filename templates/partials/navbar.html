<nav class="navbar">
    <div class="nav-container">
        <!-- Brand -->
        <div class="nav-brand">
            <a href="{% url 'core:home' %}" class="brand-link">
                <div class="brand-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <span class="brand-text">Mindlink</span>
            </a>
        </div>

        <!-- Menu -->
        <div class="nav-menu" id="nav-menu">
            <ul class="nav-list">
                <li class="nav-item">
                    <a href="{% url 'core:home' %}#home" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'core:home' %}#features" class="nav-link">Features</a>
                </li>
                {% if user.is_authenticated and user.is_therapist %}
                <li class="nav-item">
                    <a href="{% url 'accounts:therapist_requests' %}" class="nav-link">Requests</a>
                </li>
                {% elif user.is_authenticated and user.is_client %}
                 <li class="nav-item">
                   <a href="{% url 'core:home' %}#how-it-works" class="nav-link">Requests</a>
                </li>
                {% endif %}

                {% if user.is_authenticated and user.is_client %}
                    <!-- Clients see this -->
                    <li class="nav-item">
                        <a href="{% url 'accounts:therapist_list' %}" class="nav-link">Therapists</a>
                    </li>
                {% elif user.is_authenticated and user.is_therapist %}
                    <!-- Therapists see this -->
                    <li class="nav-item">
                        <a href="{% url 'posts:therapist_clients' %}" class="nav-link">Clients</a>
                    </li>
                {% endif %}

                {% if user.is_authenticated and user.is_client %}
                    <li class="nav-item">
                        <a href="{% url 'posts:list_posts' %}" class="nav-link">Posts</a>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a href="{% url 'core:about' %}" class="nav-link">About</a>
                    </li>
                {% endif %}

            </ul>
        </div>

        <!-- Authentication buttons -->
        <div class="nav-auth">
            {% if user.is_authenticated %}
                <a href="{% url 'accounts:dashboard' %}" class="nav-link login-link">
                    <i class="fas fa-user"></i>
                    Hi {% if user.first_name %}{{ user.first_name }}{% else %}{{ user.username }}{% endif %}!
                </a>
                <form method="post" action="{% url 'accounts:logout' %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-nav-secondary">
                        <i class="fas fa-sign-out-alt"></i>
                        Logout
                    </button>
                </form>
            {% else %}
                <a href="{% url 'accounts:login' %}" class="nav-link login-link">
                    <i class="fas fa-sign-in-alt"></i>
                    Login
                </a>
                <a href="{% url 'accounts:register' %}" class="btn btn-nav-primary">
                    <i class="fas fa-user-plus"></i>
                    Register
                </a>
            {% endif %}
        </div>
    </div>
</nav>